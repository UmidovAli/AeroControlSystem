1.Общая идея программы

Программа имитирует работу системы досмотра пассажиров в аэропорту с такими условиями:

Пассажиры приходят случайно во времени по Пуассоновскому закону (интервалы между ними экспоненциально распределены).

У каждого пассажира есть время обслуживания, которое выбирается равномерно случайно между SERVICE_LOW и SERVICE_HIGH.

Есть несколько серверов (inspection posts), каждый может обслуживать одного пассажира.

Если все серверы заняты, пассажир встаёт в буфер (очередь) ограниченной ёмкости.

Если буфер заполнен, удаляется самый старый пассажир (drop-oldest), а новый занимает его место.

Серверы при освобождении выбирают следующего пассажира по круговой очереди (circular dequeue), а не просто FIFO.

Программа собирает статистику и выводит её в консоль.

2.Основные компоненты программы
Passenger (Пассажир)

Хранит данные о пассажире:

id — уникальный номер

arrival_time — время прихода

service_time — время обслуживания

start_service_time и end_service_time — фактическое начало и конец обслуживания

rejected — флаг, если пассажир был удалён из буфера из-за переполнения

Server (Сервер / пост досмотра)

Может обслуживать одного пассажира.

Хранит текущего пассажира (current) и занятость (busy).

Ведёт timeline — список интервалов времени, когда сервер был занят, чтобы потом можно было вычислить загрузку.

QueueBuffer (Буфер / очередь)

Ограниченная по размеру очередь.

При переполнении удаляет самого старого пассажира.

Для выбора следующего пассажира используется круговая очередь — каждый раз выбирается следующий слот в буфере, чтобы распределять нагрузку равномерно.

Event (Событие)

Используется для дискретно-событийной симуляции.

Два типа событий:

ARRIVAL — прибытие нового пассажира

SERVICE_COMPLETE — завершение обслуживания на сервере

Все события помещаются в приоритетную очередь по времени, чтобы обрабатывались в правильном порядке.

Statistics (Статистика)

Собирает данные:

served — обслуженные пассажиры

rejected — отклонённые пассажиры

wait_times — время ожидания в очереди

queue_history — длина очереди во времени (для графиков)

После окончания симуляции рассчитывает:

Среднее время ожидания

Средняя длина очереди

Загрузка каждого сервера

Общее количество обслуженных и отклонённы

3.Как работает симуляция (алгоритм)

Планируется первое прибытие пассажира:

next_arrival_time = exponential(ARRIVAL_RATE);
schedule_event(next_arrival_time, ARRIVAL);


Цикл обработки событий:

Пока есть события в очереди:

Берём событие с наименьшим временем (heap/priority_queue)

Перемещаем текущее время симуляции (now) на время события

Обрабатываем событие в зависимости от типа:

ARRIVAL — новый пассажир:

Если есть свободный сервер → сразу обслуживаем

Иначе ставим в буфер

Если буфер переполнен → удаляем старого пассажира (отклоняем его)

Планируем следующее прибытие

SERVICE_COMPLETE — сервер освободился:

Если очередь не пуста → берём следующего пассажира по круговой очереди и начинаем его обслуживание

Иначе сервер остаётся свободным

Каждое событие обновляет статистику:

Добавляем время ожидания пассажира

Обновляем загрузку сервера

Записываем длину очереди

По завершении симуляции выводятся:

Количество обслуженных и отклонённых пассажиров

Среднее время ожидания

Средняя длина очереди

Загрузка серверов

4.Что имитирует программа

Программа реально моделирует динамику очередей в аэропорту:

Когда приходят случайные потоки пассажиров → очередь растёт

Когда серверы заняты → пассажиры ждут

Если очередь переполнена → часть пассажиров отклоняется

Серверы распределяют очередь равномерно благодаря circular dequeue

В конце видно эффективность системы: среднее время ожидания, загрузка серверов, длина очереди